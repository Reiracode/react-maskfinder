{"version":3,"sources":["assets/icon-1.png","assets/icon-2.png","Context.js","components/Map/MaskPopup.jsx","components/Map/MaskMap.jsx","components/Loading/Loading.js","components/FilterPhamcy/PharmacyList.jsx","components/MenuBar/Storelist.jsx","components/MenuBar/Overlay.jsx","components/MenuBar/MenuBar.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","MaskContext","createContext","language","setLanguage","MaskPopup","name","phone","mask_adult","mask_child","address","updated","Popup","className","data-size","otherIcon","L","icon","iconUrl","iconBlue","iconSize","iconAnchor","myIcon","iconPink","MaskMap","useContext","position","data","selindex","filterdata","useState","mapView","setMapview","console","log","selData","useEffect","length","slice","map","geometry","coordinates","MarkerClusterGroups","props","selectedIndex","index","properties","PointMarker","key","content","openPopup","clickindex","markerRef","useRef","scrollTo","e","markIndex","all","document","querySelectorAll","marginBtom","getComputedStyle","marginBottom","margbtm","substr","sum","i","parseInt","scrollHeight","getElementById","top","behavior","calTopmargin","current","leafletElement","Marker","ref","onClick","MyMarker","deaMarker","openMymark","depenOn","Map","center","zoom","viewport","TileLayer","attribution","url","selected","Loading","id","PharamcyItem","item","orderid","onItemClick","newsss","data-child","data-adult","toFixed","href","note","PharmacyList","county","town","size","list","useMemo","filter","replace","x","size_query","getDistance","destination","lat1","lng1","lat2","lng2","Math","asin","sqrt","pow","sin","PI","cos","handleItemClick","setSelected","nearby","setSeldata","sort","a","b","Storelist","open","open_list","setOpen","maskSize","querySelector","setSize","status","setStatus","selcity","setSelcity","setTown","countyOptions","arr","set","Set","has","add","localeCompare","el","value","label","getCountyOptions","townOptions","location","getTownOptions","forEach","dom","addEventListener","currentTarget","classList","toggle","parentNode","template_div","data-id","options","onChange","selectedOptions","target","nodeName","showTitle","a_item","dataset","user","userclass","firstElementChild","remove","children","sibling","data-item","Overlay","itemlist","openid","MenuBar","overlayid","currentoverlayid","usePrevious","count","setOpenFun","liclass","idname","activeli","indexOf","listItems","desc","data-index","App","selvalue","maskData","setMaskdata","isLoading","setIsLoading","setLocation","Promise","resolve","navigator","geolocation","getCurrentPosition","coords","latitude","longitude","alert","then","result","fetch","res","json","features","catch","err","message","Fragment","Provider","Boolean","window","hostname","match","ReactDOM","render","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.501bd6fd.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB10lEQVRIx52TvUsdQRTFf3fmGSyCQRhS509IRFJZaSDt+tJLGpEUQSwsrK2CIMQ0pjKYUpK3hVWCD7R41cOksn6V1VQhiCyZmRQu4bk7+5UD25y755x778wIDVi1bsEjG8Ay8CSnJ8BQET4OjL6s00tV4ZV1D/8gH4DXoV78qUd4+8Xo360D+tbNOeQswGLThLnJWBNWvhr9q1hTReL44kI55KitOUCARYccfT4/L/mVJkisf+Hhe1vzQrcvU6O+1U4Q4E2ki0zB5mxw87PBzSvYFMgi2o0i14s0shQJ2E6NOpiiDhLrCfC+SVuaAHhcJB4Ed9yGi2ljAdHr1hIlbSzgqkhkotfacDFt7AyGwPNpIsBeYv2/tWSi1wLsVWjvoXRNV6176pEfVa+3CgIowrOB0T9rV5T/MOroDzAqmkcD8m7edXWv0kQD5tztqcC4g/n4kbs9rVpdFIn1ywHOms5C7r6V1KhhrK6qhLkgbTFAWmVeG3BXDFsCNzXd3yjCVr1HDQZGTwR2awJ2B0ZP/jsAYAa/L5EXKnA1g99v0jcGnJheJrA+fRvyg10/Mb2sSd8YAJAaNQIOp6jDnGtEqwAATdgRuBa41oSdtrpOSKzvJ9b3u2j+Aj2aku2TOFc0AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB5klEQVRIx52TP09UQRTFf3dmDY3zEhprP4IaQmUFJvb0b7EhxMIQCgtqKkJCIjZYrbyttKKg0rAJFFttlIp6Kz4AzxCym5lrwcbs7pv3Z73luXPOuffMjFBTedu/Isg2sAY8n8BDoIfRLy6zv6r4Uta42/RPxctn4J1o/Iw+sr+q1Q/Jqf3T2CDf9AleLkRZqdtwYjTA6ro7tXfzPTMPXH27MnjpNBUHEGUFL53L75cFvcIGeRreSOBnU/GZTQxvXdf8qNwA5X0kgpEadvySX/ZLflkNOyqMItzteagVGeR1MQM+uq45nkKO8zSA8qmOW9wAns0D4YnPmmAxbswg+twaVoEbM7gpHBrbdhMsxo3dQQ9YnUGUwzwN/2IxY9tGOSzhzlTxmbb9Cwnym5LfW1oCavSly+x1ZUQus9cK/QXlUejPi0cNJtMcLGpQxokajJOHcxUGjacXBuPk4bwkuXjlaVgT5aL2LgRUWHdd04u1TRnPdU1P4ax2ejgrE680eOzqrgr3FdHcY3S3UqKq6TI7RNiviGffZXb43wYA2gpHKsUfqsKNtsJRHb/WIOm0RghbOvUcVABhK+m0RnX8WgMA1zV94GQKOplgtdXIAECt7qlwq8KtWt1ryluo8jRs5GnYWITzF1ytrlKTE+G7AAAAAElFTkSuQmCC\"","import { createContext } from 'react'\nexport const MaskContext = createContext([])\nexport const LanguageContext= createContext(\n    {\n        language: \"en\",\n        setLanguage: () => { }\n    }\n)\n\nexport const Openoverlay = createContext()\n// set the defaults\n","import React from \"react\";\nimport { Popup } from \"react-leaflet\";\nimport \"./MaskPopup.css\";\n\nconst MaskPopup = ({\n  name,\n  phone,\n  mask_adult,\n  mask_child,\n  address,\n  updated\n}) => {\n  \n  return (\n    <Popup className=\"popup-container\">\n      <div className=\"mask-popup\">\n        <h1>{name}</h1>\n        <h3>{phone}</h3>\n        <h3>{address}</h3>\n        {/* <div className=\"mask-box\"> \n        <h2 className={parseInt(mask_adult) === 0 ? \"no-mask\" : \"\"}>\n            <span>成人口罩</span>\n            <span>{mask_adult}</span>\n          </h2>\n          <h2 className={parseInt(mask_child) === 0 ? \"no-mask\" : \"\"}>\n            <span>兒童口罩</span>\n            <span>{mask_child}</span>\n          </h2>\n        </div> */}\n\n        <div className=\"mask_size\">\n          <span data-size=\"adult\">成人{mask_adult}</span>\n          <span data-size=\"child\">兒童{mask_child}</span>\n        </div>\n\n        <h3>資料更新:{updated}</h3>\n      </div>\n    </Popup>\n  );\n};\n\nexport default MaskPopup;\n","import React, { useContext, useMemo, useRef, useEffect, useState, useCallback } from \"react\";\nimport { Map, TileLayer, Marker, Popup, CircleMarker } from \"react-leaflet\";\nimport { MaskContext } from \"../../Context.js\";\n// import MarkerClusterGroup from \"./MarkerClusterGroup.jsx\";\nimport MarkerClusterGroup from 'react-leaflet-markercluster';\nimport MaskPopup from \"./MaskPopup.jsx\";\nimport L from \"leaflet\";\nimport iconBlue from \"../../assets/icon-1.png\";\nimport iconPink from \"../../assets/icon-2.png\";\n\n\n// https://codesandbox.io/s/react-leaflet-markercluster-getting-started-9binx?file=/src/App.js\n\n//Customising the Clustered Markers\n// let DefaultIcon = L.icon({\n//   iconUrl: icon\n// });\n// L.Marker.prototype.options.icon = DefaultIcon;\n\n// Customising the Markers\n// const myIcon = L.icon({\n//   iconUrl: window.location.origin + \"/assets/icon-1.png\", //assets/icon-1.png\",\n//   iconSize: [30, 30],\n//   iconAnchor: [16, 36],\n//   popupAnchor: [1, -34]\n// });\n\nconst otherIcon = L.icon({\n  iconUrl: iconBlue,\n  iconSize: [30, 30],\n  iconAnchor: [16, 36]\n});\n\nconst myIcon = L.icon({\n  iconUrl: iconPink,\n  iconSize: [30, 30],\n  iconAnchor: [16, 36]\n});\n\n// console.log(myIcon)\n\nconst MaskMap = () => {\n  const { data, position, selindex, filterdata} = useContext(MaskContext);\n  const [mapView, setMapview] = useState([0,0]);\n  console.log(filterdata.selData) \n\n\n  //default :positon map viewport center\n  //when filterdata 有資料 要改成mapview \n\n//dropdown menu chnage\n  useEffect(() => { \n    console.log(\"dropdown menu chnage\")\n    console.log(filterdata.selData)\n    if (filterdata.selData.length){\n      console.log(\"value\")\n      //取一筆資料來顯示m\bapview\n      filterdata.selData.slice(0,1).map(({ geometry})=>{\n        console.log(geometry.coordinates)\n        setMapview([geometry.coordinates[1],geometry.coordinates[0]]);\n      });\n    }\n  }, [filterdata.selData]);\n\n\n  //pass val to datafilter  \n  const MarkerClusterGroups = (props) => {\n    // const selectedIndex =\"11\"\n    // const markerRef = (props) => {\n    //   console.log(props)\n    // }\n\n    const { selectedIndex } = props;\n    console.log(props)//{selectedIndex:4}\n    return (\n      <>\n        <MarkerClusterGroup>  \n        {/* {data.filter(({ properties }) => properties.county == \"宜蘭縣\" && properties.town == \"三星鄉\") */}\n          {/*  .map(({geometry, properties},index)=> { */}\n          \n          {(filterdata.selData)\n              .map(({geometry, properties},index)=> {\n            return (\n            // <Marker key={index} \n            //         position={[geometry.coordinates[1], geometry.coordinates[0]]}\n            //         ref={markerRef}\n            //         // openPopup={selectedIndex === index} \n            // >\n            //   <MaskPopup {...properties} />\n            // </Marker>\n              // <PointsLayer selectedIndex={selindex.selected} />\n\n              <PointMarker\n                key={index}\n                position={[geometry.coordinates[1], geometry.coordinates[0]]}\n                content={properties.name}\n                properties={{ ...properties }}\n                // center={{ lat: item.lat, lng: item.lng }}\n                openPopup={selectedIndex === index} \n                clickindex={index}\n              > \n              <MaskPopup {...properties} />\n              </PointMarker>\n          );\n        })}\n          </MarkerClusterGroup>  \n      </>\n    );\n  };\n\n\n\n  function getMarker(e){\n    console.log(e)\n    // console.log(e.target._leaflet_id)\n    // event.layer._leaflet_id;\n    console.log(\"getMarker\")\n  }\n\n\n  //自定義child marker\n  const  PointsLayer=(props)=> {\n    //p\bharmacyList CLICK選擇的第幾個\n    const { selectedIndex } = props;\n    console.log(props)\n    return (\n    //  <MarkerClusterGroup>\n    //   {\n      //data.filter(({ properties }) => properties.county == \"臺北市\" && properties.town == \"萬華區\")\n      filterdata.selData.map(({ geometry, properties }, index) => {\n        return (\n          <PointMarker\n            key={index}\n            position={[geometry.coordinates[1], geometry.coordinates[0]]}\n            content={properties.name}\n            properties={{ ...properties }}\n            // center={{ lat: item.lat, lng: item.lng }}\n            openPopup={selectedIndex === index}\n            clickindex={index}\n          />\n        );\n      })\n    //    }\n    // </MarkerClusterGroup>\n    );\n  }\n  \n  const PointMarker = (props)=>{\n    const markerRef = useRef(null)\n    const { position, openPopup, properties, clickindex } = props;\n    // console.log(clickindex)//\b順序的index\n    // console.log(openPopup)\n\n    //call back to parent\n    function scrollTo(e) {\n      console.log(e)\n      // var all = document.querySelectorAll('#storelist>.store_detail');\n      // console.log(all)\n      calTopmargin(e)\n      // document.getElementById('storelist').scrollTo(0, 190)\n    }\n\n    function calTopmargin(markIndex){\n      console.log(markIndex)\n    \n      var all = document.querySelectorAll('#storelist>.store_detail');\n      var marginBtom = getComputedStyle(all[0]).marginBottom;\n      var margbtm = marginBtom.substr(0, marginBtom.length - 2);\n      var sum = 0;\n      for (var i = 0; i < markIndex; i++) {\n        sum += parseInt(all[i].scrollHeight) + parseInt(margbtm);\n      };\n      // document.getElementById('storelist').scrollTo(0, sum)\n      document.getElementById('storelist').scrollTo({\n        top: sum,\n        behavior: 'smooth'  \n      });\n\n    }\n\n    useEffect(()=>{\n      // if (openPopup) markerRef.current.leafletElement.openPopup();\n      if (openPopup) {\n        markerRef.current.leafletElement.openPopup();\n      }\n    }, [openPopup])\n\n    return (\n      <Marker\n        icon={otherIcon} ref={markerRef} position={position}\n        // test={clickindex}\n        // onClick={getMarker(clickindex)}\n        onClick={()=>scrollTo(clickindex)}\n        >\n        {/* <Popup>{content}</Popup> */}\n        <MaskPopup {...properties} />\n      </Marker>\n    );\n\n  }\n\n  //default ref openPopup我的位置訊息\n  const MyMarker = props => {\n    console.log(props)\n    const deaMarker = useRef(null) \n    const [openMymark, setOpenMymark] = useState(true)\n    const depenOn = !(filterdata.selData.length)\n    console.log(depenOn)\n    // const depenOn = useCallback(() => {\n    //   return !(filterdata.selData.length)\n    // },[props])\n\n    // console.log(depenOn)\n    // console.log(filterdata.selData.length)\n    //看起來好像是對的 !filterdata.selData.length) \n    //但判斷點在選的資料，每次變更條件就會RE_RENDER\n    useEffect(()=>{\n      console.log(openMymark)\n      console.log(!(filterdata.selData))\n      // if (!filterdata.selData.length) {\n      if (depenOn) {\n        deaMarker.current.leafletElement.openPopup();\n      }\n    }, [depenOn])\n\n\n    return(\n      <Marker ref={deaMarker} {...props} openPopup={openMymark}>\n        <Popup> You're Here <br /> Reira </Popup> \n      </Marker> \n    ) \n  };\n\n  return (\n    <Map  \n      center={mapView} zoom={13}\n      viewport={{\n          center: !(filterdata.selData.length) ? position : mapView\n      ,zoom: 15}}\n    >\n      {/* <Map center={{ position }.position} */}\n      {/* //   zoom={6} maxZoom={18} duration={3}\n    //   viewport={{\n    //     center: position.position,\n    //     zoom: 15\n    //   }}  */}\n      {/* // >   */}\n      <TileLayer\n        attribution='&copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors'\n        url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      />\n\n      <MyMarker icon={myIcon} position={position}/>\n\n      <MarkerClusterGroups selectedIndex={selindex.selected} />\n\n{/*自行設定的 child Marker click=> scroll to div*/} \n      {/* <PointsLayer selectedIndex={selindex.selected} /> */}\n\n\n      {/* <PointsLayer selectedIndex={1}  /> */}\n    </Map>\n  );\n};\n\nexport default MaskMap;\n","import React,{} from  'react';\nconst Loading = () =>{\n\n    return (\n    <div id=\"loading\">\n        <div className=\"loader\"></div>\n    </div>\n    )\n\n}\n\nexport default Loading","import React, { useContext, useMemo , useState ,useEffect} from 'react';\nimport { MaskContext } from '../../Context.js'\n// click openPopup\nconst PharamcyItem = ({ item, orderid, onItemClick, newsss}) => {\n    const {properties} = item\n    return (\n        <div className=\"store_detail\"  onClick={() =>  onItemClick(orderid) }>\n            <h2 className=\"store_title\" data-child={properties.mask_child}\n                data-adult={properties.mask_adult}>{properties.name}\n                <span><i className=\"fas fa-map-marker-alt\"></i>\n                   {/* {getDistance(cor) } */}\n                    {newsss >= 1 ? newsss.toFixed(1) + 'km' : (newsss * 1000 >> 0) + 'm'}\n                </span>\n            </h2>\n            <p className=\"addtolist\" ><i className=\"far fa-check-square\"></i></p>\n            <p><i className=\"fas fa-briefcase\"></i>{properties.address}</p>\n            <p><i className=\"fas fa-phone fa-flip-horizontal\"></i>\n                <a href=\"tel:{properties.phone}\">{properties.phone}</a>\n            </p>\n            {properties.note.length <= 1 ? \" \" : <p><i className=\"fas fa-tag\"></i>{properties.note}</p>}\n            <div className=\"mask_size\">\n                <span data-size='adult'>成人{properties.mask_adult}</span>\n                <span data-size='child'>兒童{properties.mask_child}</span>\n            </div>\n            <span>最後更新:{properties.updated}</span>\n        </div>\n    )\n}\n\nconst PharmacyList = ({ county, town, size }) => {\n    const { data, position, selindex, filterdata } = useContext(MaskContext);\n    console.log(county)//drowdwn//city\n    console.log(town)//Manga//mask_adult: 3141mask_child: 1290\n    console.log(filterdata)\n    console.log(data)\n    console.log(position)\n\n    const list = useMemo(() =>      \n            county && town ? data.filter(({ properties }) => {\n                return properties.county.replace(/臺/g, '台') === county\n                    && properties.town.replace(/臺/g, '台') === town\n                    && size_query(size, properties)}) \n            : data.filter(item => {\n                    return getDistance([position[0], position[1]], [item.geometry.coordinates[1], item.geometry.coordinates[0]]) < 1\n            }), [county, town])\n        //[county, town, data, size])\n\n    //markers根據list變動來更新data \n    useEffect(() => {\n        console.log(list)\n        console.log(!list.length)\n        const nearby = data.filter(item => {\n            return getDistance([position[0], position[1]], [item.geometry.coordinates[1], item.geometry.coordinates[0]]) < 1\n        })\n        console.log(nearby)\n        !list.length \n            ? filterdata.setSeldata(nearby)\n            : filterdata.setSeldata(list)\n\n    }, [list])\n   \n\n    function getDistance(position, destination) {\n        let lat1 = position[0]\n        let lng1 = position[1]\n        let lat2 = destination[0]\n        let lng2 = destination[1]\n        return 2 * 6378.137 * Math.asin(Math.sqrt(Math.pow(Math.sin(Math.PI * (lat1 - lat2) / 360), 2) + Math.cos(Math.PI * lat1 / 180) * Math.cos(Math.PI * lat2 / 180) * Math.pow(Math.sin(Math.PI * (lng1 - lng2) / 360), 2)))\n    }\n\n\n    function size_query(x, properties) {\n        if (x == \"child\") {\n            return properties.mask_child > 0\n        } else if (x == \"adult\") {\n            return properties.mask_adult > 0\n        } else {\n            return (properties.mask_adult >= 0 || properties.mask_child >= 0)\n        }\n    }\n\n    function handleItemClick(index) {\n        selindex.setSelected(index);\n    }\n\n\n\n    return (\n        <div className=\"datalist\" id=\"storelist\">\n            {/* {list.map((item,index) => \n                    (<PharamcyItem \n                        key={index} \n                        item={item} \n                        orderid ={index}\n                        onItemClick={handleItemClick} \n                    />))\n            } */}\n\n            {list.sort(({ geometry: { coordinates: a } }, { geometry: { coordinates: b } }) => {\n                return getDistance([position[0], position[1]], [a[1], a[0]]) - getDistance([position[0], position[1]], [b[1], b[0]])\n            }).map((item, index) => {\n                return (<PharamcyItem\n                        key={index}\n                        item={item}\n                        orderid={index}\n                        onItemClick={handleItemClick}\n                        newsss={getDistance([position[0], position[1]], [item.geometry.coordinates[1], item.geometry.coordinates[0]])}\n                    />)} \n            )}      \n        </div>\n    );\n}\n\nexport default PharmacyList;\n","import React, { useState, useEffect } from 'react';\nimport { MaskContext } from '../../Context.js'\nimport Select from \"react-select\";\nimport PharmacyList from '../FilterPhamcy/PharmacyList.jsx'\nconst Storelist = ({ county, open, onClick, setOpen, open_list}) => {\n  const maskSize = document.querySelector('#mask_sel');\n  const [size, setSize] = useState(\"\");\n\n  function maskSelector(e){\n    if (e.target.nodeName == 'BUTTON') {\n      const showTitle = document.querySelectorAll(\".store_detail\");\n      var a_item = e.target.dataset['item'];\n      showTitle.forEach(item => hideUser(item, a_item));\n      //button sibling\n      e.target.classList.add('active');\n      setSize(e.target.dataset.item)\n      for (let sibling of e.target.parentNode.children) {\n        if (sibling !== e.target) sibling.classList.remove('active');\n      }\n    }\n  }\n  // })\n\n  function hideUser(user, userclass) {\n    userclass == 'all'\n      ? user.classList.remove('d-none')\n      : (user.firstElementChild.dataset[userclass] > 0) ? user.classList.remove('d-none')\n        : user.classList.add('d-none');\n  }\n\n  console.log(maskSize)\n\n  const [status, setStatus] = useState(open_list)\n  // const { data, position } = useContext(MaskContext)\n  console.log(open_list)\n  console.log(open)\n  useEffect(()=>{\n    setStatus(open_list)\n    console.log(status)\n  }, [open_list])\n\n  const [selcity, setSelcity] = useState(\"\");\n  const [town, setTown] = useState(\"\");\n\n  function getCountyOptions(arr) {\n    //獲取縣市列表(不重複)\n    // console.log(arr);\n    const set = new Set();\n    return arr.filter(({ county }) => (!set.has(county) ? set.add(county) : false))\n      .map(item => item.county.replace(/臺/g, '台'))\n      .sort(function (a, b) {\n        return a.localeCompare(b, 'zh-Hant-TW-u-co-stroke')\n      }).map((el) => {\n        return { value: el, label: el }\n      })\n    //map & reduce\n    // .reduce((result, county) => {\n    //   if (county) {\n    //     result.push({\n    //       value: county,\n    //       label: county\n    //     });\n    //   }\n    //   return result;\n    // }, []);\n  }\n\n  function getTownOptions(arr, location) {\n    //獲取地區列表(不重複)\n    const set = new Set();\n    // console.log(arr)\n    console.log(location)\n    return arr.filter(({ county }) => {\n      return county.replace(/臺/g, '台') === location;\n    }).filter(({ town }) => (!set.has(town) ? set.add(town) : false))\n      .map(({ town }) => { return town }).sort(function (a, b) {\n        return a.localeCompare(b, 'zh-Hant-TW-u-co-stroke')\n      }).map((el) => {\n        return { value: el, label: el }\n      })\n  }\n\n  const countyOptions = getCountyOptions(county);\n  // console.log(countyOptions)\n  const townOptions = county ? getTownOptions(county, selcity) : []\n\n  function locationChangeHandler(selectedOptions) {\n    console.log(selectedOptions.value)\n    setSelcity(selectedOptions.value)\n    setTown(\"\")\n  }\n\n  function townChangeHandler(selectedOptions) {\n    console.log(selectedOptions.value)\n    setTown(selectedOptions.value)\n  }\n\n  // const closeBtn = [...document.querySelectorAll('.close_overlay')];\n  function closeOverlay(e) {\n    console.log(\"Overlay\")\n    let closeid = e.target.parentNode;\n    console.log(closeid)\n    // setOopen(!oopen)\n    console.log(!open)\n    // setOpen(false)\n    // closeid.classList.remove('active');\n  }\n  // const Modal1 = ({ open_list }) => (\n  //   <div isOpen onRequestClose={onRequestClose} {...otherProps}>\n  //     <button onClick={onRequestClose}>close</button>\n  //     <div>I am a modal{open_list} </div>\n  //   </div>\n  // );\n  const open_arrow = [...document.querySelectorAll('.open_arrow')];\n  open_arrow.forEach(dom => dom.addEventListener('click', (e) => {\n    e.currentTarget.classList.toggle('active');\n    e.currentTarget.parentNode.classList.toggle('ctrl_size');\n  }))\n  const template_div = (\n    // console.log(open_list)\n    !!(open_list==\"list\")? (\n      <div className={`overlay ${!open ? \"\" : \"active\"}`}\n        data-id=\"list\" id=\"list\" value={open}>\n        <button className=\"open_arrow\"><i className=\"fas fa-angle-up\"></i></button>\n        <div className=\"close_overlay\" onClick={() => onClick(\"close\")}>\n          <i className=\"fas fa-times\"></i></div>\n\n        {/* <h2>{!open ? \"false\" : \"true\"}</h2> */}\n        <div className=\"select-box\">\n          <span>縣市</span>\n          <Select className=\"select\" options={countyOptions} onChange={locationChangeHandler} />\n          <span>地區</span>\n          <Select className=\"select\" options={townOptions} onChange={townChangeHandler} />\n          <div className=\"my-selector-c\">\n            <div id=\"mask_sel\" onClick={maskSelector}>\n              <button className=\"mask_all active\" data-item=\"all\">ALL</button>\n              <button className=\"mask_all\" data-item=\"adult\">Adult</button>\n              <button className=\"mask_all\" data-item=\"child\">Child</button>\n            </div>\n          </div>\n        </div>\n        <PharmacyList county={selcity} town={town}  size={size}/>\n      </div>\n    )\n      : //<div style={{display:\"flex\"}}\n      <div className={`overlay ${!open ? \"\" : \"active\"}`}\n        data-id={open_list} id={open_list}    value={open}>\n        <button className=\"open_arrow\"><i className=\"fas fa-angle-up\"></i></button>\n        <div className=\"close_overlay\" onClick={() => onClick(\"close\")}>\n          <i className=\"fas fa-times\"></i></div>\n        {open_list}\n      </div>   \n      // <div style={{ display: `${!open ? \"none\" : \"flex\"}` }}>\n      //    {open_list}\n      //  </div> \n  )\n  // }\n//menubar >overlay \n//close_overlay> click >\n  return (\n    <div>\n      {template_div}\n    </div>\n    \n    // <div className={`overlay ${!open ? \"\" :\"active\"}`} \n    // data-id=\"list\" id=\"list\" value={open}>\n    //   <button className=\"open_arrow\"><i className=\"fas fa-angle-up\"></i></button>\n    //   <div className=\"close_overlay\" onClick={()=>onClick(\"close\")}>\n    //   <i className=\"fas fa-times\"></i></div>\n    //   <h2>{!open ?\"false\" :\"true\"}</h2>\n\n    //   <div className=\"select-box\">\n    //     <span>縣市</span>\n    //     <Select className=\"select\" options={countyOptions} onChange={locationChangeHandler} />\n\n    //     <span>地區</span>\n    //     <Select className=\"select\" options={townOptions} onChange={townChangeHandler} />\n\n    //     <div className=\"my-selector-c\">\n    //       <div id=\"mask_sel\">\n    //         <button className=\"mask_all active\" data-item=\"all\">ALL</button>\n    //         <button className=\"mask_all\" data-item=\"adult\">Adult</button>\n    //         <button className=\"mask_all\" data-item=\"child\">Child</button>\n    //       </div>\n    //     </div>\n    //   </div>\n\n    //   <PharmacyList county={selcity} town={town}  />\n    // </div>\n  );\n\n}\nexport default Storelist","import React, { useState, useEffect, Component, useContext } from 'react';\nimport { MaskContext} from '../../Context.js'\nimport Storelist from './Storelist.jsx';\n\nconst Overlay = (props) => {\n    const { data, position } = useContext(MaskContext)\n    const { itemlist, openid, open, onClick,setOpen } = props;\n\n    // console.log(props.open)\n    console.log(props.itemlist)\n    function callback(count){\n        console.log(count)\n    }\n    \n    \n    //將Select需要的搜索項目先提出來\n    function optionsfilter(arr) {\n        const result = arr.map(({ properties }) => {\n            return {\n                county: properties.county,\n                town: properties.town\n            }\n        })\n        return result\n    }\n\n    return( \n        <Storelist \n            open_list={props.itemlist}\n            county={optionsfilter(data)} \n            open={open} \n            onClick={onClick} \n            // parentCallback={callback}\n        />  \n    )\n}\n\nexport default Overlay","import React, { useState, useEffect ,useRef} from 'react';\nimport Overlay from './Overlay.jsx'\n\nconst MenuBar = () => {\n    const [open, setOpen] = useState(false)\n    //overlay\n    // const [odpen, setOdpen] = useState(false)\n    // const openover = { odpen, setOdpen };\n\n    const [overlayid, currentoverlayid] = useState(\"\");\n    const [sindex,setSindex] =useState()\n    // useEffect(() => {\n    //     console.log(odpen)\n    //     if (!odpen) setSindex()\n    // }, [odpen])\n\n    // function setOpenFun(index){\n    //      console.log(index)\n    //     // setSindex(index)\n    //     setOpen(!open)\n    //     // const selitem = document.querySelectorAll('.list_menu')[index].dataset.id\n    //     // console.log(selitem)\n    //     // currentoverlayid(selitem)\n    // }\n//index寫法 x=>click \n    function usePrevious(value) {\n        const ref = useRef();\n        useEffect(() => {\n            ref.current = value;\n        });\n        return ref.current;\n    }\n\n    // the App where the hook is used \n    function Counter() {\n        const [count, setCount] = useState(0);\n        // 👇 look here\n        const prevCount = usePrevious(count)\n        console.log(\"Now:\" + { count }, \"before\" + { prevCount })\n        // return <h1>Now: {count}, before: {prevCount}</h1>;\n    }\n\n    const [count, setCount] = useState(0);\n\n    // Get the previous value (was passed into hook on last render)\n    const prevCount = usePrevious(count);\n\n\n    function setOpenFun(e) {\n        //self other close\n        console.log(e)\n        if (!(e == \"close\")){\n            console.log(\"--overlayid--\" + overlayid + \"--etarget--\" + e.target.dataset.id)\n            const liclass = e.target.classList.value\n            if (!!overlayid &&  (overlayid != e.target.dataset.id) ){\n                console.log(\"切換other\")//change to other\n                for (var item of document.querySelectorAll('.list_menu')) {\n                    item.classList.remove('active');\n                }\n                e.target.classList.add('active')\n                setOpen(true)\n            }else{//self\n                console.log(\"自己\" + liclass + \"---\" + e.target.classList.value)//change to other\n                const idname = e.target.dataset.id\n                console.log(idname)\n\n                // const activeli = document.querySelectorAll(`li[data-id=${idname}]`)[0].classList.value\n                // console.log(activeli + \"true or flase-\" + (!!(activeli.indexOf('active') > - 1)))\n                // !!(activeli.indexOf('active') > - 1)\n                //     ? document.querySelectorAll(`li[data-id=${idname}]`)[0].classList.remove('active')\n                //     : document.querySelectorAll(`li[data-id=${idname}]`)[0].classList.add('active')\n\n                const activeli = document.querySelectorAll(`li[data-id=${idname}]`)[0].classList\n                !!((activeli.value).indexOf('active') > - 1)\n                    ? activeli.remove('active')\n                    : activeli.add('active')\n\n\n                setOpen(!open)\n            }   \n            currentoverlayid(e.target.dataset.id)\n        }else{\n            console.log(\"close\")\n            for (var item of document.querySelectorAll('.list_menu')) {\n                item.classList.remove('active');\n            }\n            setOpen(!open)\n        }\n    }\n\n    let litems = [\n        { id: \"personal\", icon: \"fa-user\", desc: \"個人記錄R\" },\n        { id: \"mystore\", icon: \"fa-folder-open\", desc: \"我的最愛\" },\n        { id: \"list\", icon: \"fa-calendar-plus\", desc: \"search\" },\n        { id: \"relocate\", icon: \"fa-compass\", desc: \"重新定位\" },\n    ];\n\n    const listItems = litems.map(function (item, index) {\n        return (\n            <li key={index}\n                className={`list_menu`}\n                // className={`list_menu ${sindex == index ? \"active\" : \"\"}`}\n                onClick={setOpenFun}\n                // onClick={() => setOpenFun(index)}\n                data-id={item.id}\n                data-index={index}\n            >\n                <i className={`fa ${item.icon}`}></i>\n                <span className=\"dialog\">{item.desc}</span>\n            </li>\n        )\n    });\n\n    return(\n        <>\n        <Overlay itemlist={overlayid}  open={open} onClick={setOpenFun} />\n        {/* </Overlay> */}\n        <ul className=\"mobile_menu\" id=\"menu_bar\" data-id=\"menu_bar\">\n            {listItems}\n        </ul>\n        </>\n    )\n}\n\nexport default MenuBar\n\n/*\nway1:Context:export const Openoverlay = createContext()\n分開管理狀態 setState and provider\nMenubar--Overlay -- Storelist -- PharmacyList\nlist                   X close overlay\nclick\nopen overlay\n\nWay2: props parentcallback\ncross 3 components\ngrandpa - parent - child\ngrandpa control open or not\nchild also  open or not\n\nQuestion:\n關掉overlay  render3次\nsetOpenFun\n\n\n開關[open,setOpen]=useState(false)\nsetOpen\nli menu \nfunction click   setOpen(!open)\n\bli class={list_menu  !open? \"\":\"active\"\n\noverlay\nfunction click XX   setOpen(!open)\noverlay class={overlay  !open? \"\":\"active\"\n\n\n共享狀態\n\n*/","import React, { useState, useEffect, createContext } from 'react';\nimport MaskMap from './components/Map/MaskMap.jsx'\nimport Loading from  './components/Loading/Loading'\nimport MenuBar from './components/MenuBar/MenuBar.jsx'\nimport { MaskContext, LanguageContext } from \"./Context.js\";\nimport \"./App.css\";\n\n//promise.all確認二個程式都有回傳成功才進行下一段\n//location & maskdata => loading false\n//之前用fetch程式時  Mask-APP-Master發生\nconst defaultState = [25.026277, 121.499962];\nconst App = ()=> {\n  //dataProvider\n  // curent click index\n  const [selected, setSelected] = useState();\n  const selvalue = { selected, setSelected };\n\n  const [maskData, setMaskdata] = useState([]);\n  //use context\n  // const madedata = { maskData, setMaskdata };\n  //filter maskdata\n  const [selData, setSeldata] = useState([]);\n  const filterdata = { selData, setSeldata };\n  // const [filterdata, setFilterdata] = useState([]);\n\n  const [hasError, setErrors] = useState(false);\n  const [isLoading,setIsLoading]= useState(true);\n  const [location, setLocation] = useState([0,0]);\n \n//單純return 後續return promiseall setData or  no return 直接setData\n  // const fetchMaskData = () => {\n  //   return fetch('https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json')\n  //     .then((response) => response.json())\n  //     .then(data => {\n  //       console.log(data.features)\n  //       return (data.features)\n  //     });\n  // };\n\n  \n\n  // const getGeolocation = () => {\n  //   setIsLoading(true)\n  //   navigator.geolocation.getCurrentPosition(async (pos) => {\n  //     console.log([pos.coords.latitude, pos.coords.longitude]);\n  //     setLocation([pos.coords.latitude, pos.coords.longitude])\n  //     // setIsLoading(t);\n  //   });\n  //   setIsLoading(false)\n  // }\n\n\n  // const getGeolocation =() =>{\n  //   if (navigator.geolocation) {\n  //     navigator.geolocation.getCurrentPosition(async (p) => {\n  //       // navigator.geolocation.getCurrentPosition((p) => {\n  //       setLocation([p.coords.latitude, p.coords.longitude] )\n  //       // return ([p.coords.latitude, p.coords.longitude])\n  //     })\n  //   }\n  // }\n\n  // const getGeolocation =() =>{\n  //   return new Promise((resolve, reject) => {\n  //     if (navigator.geolocation) {\n  //       navigator.geolocation.getCurrentPosition(position => \n  //         {\n  //         resolve([position.coords.latitude, position.coords.longitude])\n  //         setIsLoading(false)\n  //       })\n  //     } else {\n  //       reject(Error(\"It broke\"));\n  //     }\n  //   })\n  // }\n\n  const getGeolocation =() =>{\n    return new Promise(resolve => {\n      !!(navigator.geolocation)\n        ? navigator.geolocation.getCurrentPosition(position => {\n          resolve([position.coords.latitude, position.coords.longitude])\n        })\n        : alert(\"Geolocation is not supported by your browser\")\n    }).then((result)=> {\n      console.log(result); // 1\n      setLocation(result)\n      return result;\n    });\n  }\n\n  // useEffect(() => {       //獲取使用者位置\n  //   if (!isLoading) {\n  //     if (navigator.geolocation) {\n  //       navigator.geolocation.getCurrentPosition((p) => {\n  //         setLocation(\n  //           [p.coords.latitude, p.coords.longitude])\n  //       })\n  //     }\n  //   }\n  // }, [isLoading])\n\n  const getMaskdata = () => {\n    setIsLoading(true)\n    fetch('https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json')\n    // fetch('./') \n    .then((res) => res.json())\n      .then(json => {\n        console.log(json.features)\n        setMaskdata(json.features)\n        setIsLoading(false)\n        return (json.features)\n        // return (data.features)\n      });\n  };\n\n \n//return new promise------------fetchWeather(),\n  // useEffect(() => {\n  //   Promise.all([getGeolocation(), getMaskdata()]);\n  // }, []);\n  useEffect(() => {\n    //location null loading\n    // promise 沒有前後順序\n    Promise.all([getGeolocation(), getMaskdata()])\n      .then(result =>{\n        if (!(location.length)) {\n          setIsLoading(true)\n        }\n\n\n        console.log(result[0]);\n        console.log(result[1]);\n        console.log(location);\n        // setLocation([position.coords.latitude, position.coords.longitude])\n      }).catch((err) => {\n        console.log(err.message)\n      });\n\n  }, []);\n\n\n  return (\n    <React.Fragment>\n      {isLoading ? <Loading /> : null}\n      {/* {isLoading ? (\n        <Loading />\n      ) : ( */}\n        <div className=\"main\">\n          <MaskContext.Provider\n            value={{\n              data: maskData,\n              position: location,\n              selindex: selvalue,\n              filterdata\n              // setLocation: (obj) => { setLocation(obj) },\n            }}\n          >\n            <MaskMap />\n            <MenuBar />\n          </MaskContext.Provider>\n        </div>\n    </React.Fragment>\n  );\n}\n\nexport default App;\n\n\n/*\n1、promise.all([funcA(),funcB())\n  funcA 是否限制\n   1、一定要有return值，\n   2、new promise\n   3、或是只是確認有exec fun 就可以呢\n\n   我的目的是確認promise.all()內的func有執行後，才把loading拿掉\n\n2、err:dom\n   //li addEventListener or onclick function\n   useeffect selector問題\n\n3、err:mount\n   \n\n4、useeffect(()=>{}[])\n\n  position => Maskmap 一開始是空的，\n\n */","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}