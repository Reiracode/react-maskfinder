(this["webpackJsonpreact-gh-pages-demo"]=this["webpackJsonpreact-gh-pages-demo"]||[]).push([[0],{34:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB10lEQVRIx52TvUsdQRTFf3fmGSyCQRhS509IRFJZaSDt+tJLGpEUQSwsrK2CIMQ0pjKYUpK3hVWCD7R41cOksn6V1VQhiCyZmRQu4bk7+5UD25y755x778wIDVi1bsEjG8Ay8CSnJ8BQET4OjL6s00tV4ZV1D/8gH4DXoV78qUd4+8Xo360D+tbNOeQswGLThLnJWBNWvhr9q1hTReL44kI55KitOUCARYccfT4/L/mVJkisf+Hhe1vzQrcvU6O+1U4Q4E2ki0zB5mxw87PBzSvYFMgi2o0i14s0shQJ2E6NOpiiDhLrCfC+SVuaAHhcJB4Ed9yGi2ljAdHr1hIlbSzgqkhkotfacDFt7AyGwPNpIsBeYv2/tWSi1wLsVWjvoXRNV6176pEfVa+3CgIowrOB0T9rV5T/MOroDzAqmkcD8m7edXWv0kQD5tztqcC4g/n4kbs9rVpdFIn1ywHOms5C7r6V1KhhrK6qhLkgbTFAWmVeG3BXDFsCNzXd3yjCVr1HDQZGTwR2awJ2B0ZP/jsAYAa/L5EXKnA1g99v0jcGnJheJrA+fRvyg10/Mb2sSd8YAJAaNQIOp6jDnGtEqwAATdgRuBa41oSdtrpOSKzvJ9b3u2j+Aj2aku2TOFc0AAAAAElFTkSuQmCC"},35:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB5klEQVRIx52TP09UQRTFf3dmDY3zEhprP4IaQmUFJvb0b7EhxMIQCgtqKkJCIjZYrbyttKKg0rAJFFttlIp6Kz4AzxCym5lrwcbs7pv3Z73luXPOuffMjFBTedu/Isg2sAY8n8BDoIfRLy6zv6r4Uta42/RPxctn4J1o/Iw+sr+q1Q/Jqf3T2CDf9AleLkRZqdtwYjTA6ro7tXfzPTMPXH27MnjpNBUHEGUFL53L75cFvcIGeRreSOBnU/GZTQxvXdf8qNwA5X0kgpEadvySX/ZLflkNOyqMItzteagVGeR1MQM+uq45nkKO8zSA8qmOW9wAns0D4YnPmmAxbswg+twaVoEbM7gpHBrbdhMsxo3dQQ9YnUGUwzwN/2IxY9tGOSzhzlTxmbb9Cwnym5LfW1oCavSly+x1ZUQus9cK/QXlUejPi0cNJtMcLGpQxokajJOHcxUGjacXBuPk4bwkuXjlaVgT5aL2LgRUWHdd04u1TRnPdU1P4ax2ejgrE680eOzqrgr3FdHcY3S3UqKq6TI7RNiviGffZXb43wYA2gpHKsUfqsKNtsJRHb/WIOm0RghbOvUcVABhK+m0RnX8WgMA1zV94GQKOplgtdXIAECt7qlwq8KtWt1ryluo8jRs5GnYWITzF1ytrlKTE+G7AAAAAElFTkSuQmCC"},38:function(e,t,a){e.exports=a(52)},43:function(e,t,a){},48:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(10),l=a.n(c),r=(a(43),a(7)),s=a(26),i=a(29),u=a(30),m=a(28),d=a(31),f=Object(n.createContext)([]),g=(Object(n.createContext)({language:"en",setLanguage:function(){}}),Object(n.createContext)(),a(32)),p=a.n(g),v=(a(48),function(e){var t=e.name,a=e.phone,n=e.mask_adult,c=e.mask_child,l=e.address,r=e.updated;return o.a.createElement(u.a,{className:"popup-container"},o.a.createElement("div",{className:"mask-popup"},o.a.createElement("h1",null,t),o.a.createElement("h3",null,a),o.a.createElement("h3",null,l),o.a.createElement("div",{className:"mask_size"},o.a.createElement("span",{"data-size":"adult"},"\u6210\u4eba",n),o.a.createElement("span",{"data-size":"child"},"\u5152\u7ae5",c)),o.a.createElement("h3",null,"\u8cc7\u6599\u66f4\u65b0:",r)))}),E=a(2),h=a.n(E),A=a(34),b=a.n(A),O=a(35),j=a.n(O),k=h.a.icon({iconUrl:b.a,iconSize:[30,30],iconAnchor:[16,36]}),y=h.a.icon({iconUrl:j.a,iconSize:[30,30],iconAnchor:[16,36]}),w=function(){var e=Object(n.useContext)(f),t=(e.data,e.position),a=e.selindex,c=e.filterdata,l=Object(n.useState)([0,0]),g=Object(r.a)(l,2),E=g[0],h=g[1];console.log(c.selData),Object(n.useEffect)((function(){console.log("dropdown menu chnage"),console.log(c.selData),c.selData.length&&(console.log("value"),c.selData.slice(0,1).map((function(e){var t=e.geometry;console.log(t.coordinates),h([t.coordinates[1],t.coordinates[0]])})))}),[c.selData]);var A=function(e){var t=e.selectedIndex;return console.log(e),o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,null,c.selData.map((function(e,a){var n=e.geometry,c=e.properties;return o.a.createElement(b,{key:a,position:[n.coordinates[1],n.coordinates[0]],content:c.name,properties:Object(s.a)({},c),openPopup:t===a,clickindex:a},o.a.createElement(v,c))}))))};var b=function(e){var t=Object(n.useRef)(null),a=e.position,c=e.openPopup,l=e.properties,r=e.clickindex;function s(e){console.log(e),function(e){console.log(e);for(var t=document.querySelectorAll("#storelist>.store_detail"),a=getComputedStyle(t[0]).marginBottom,n=a.substr(0,a.length-2),o=0,c=0;c<e;c++)o+=parseInt(t[c].scrollHeight)+parseInt(n);document.getElementById("storelist").scrollTo({top:o,behavior:"smooth"})}(e)}return Object(n.useEffect)((function(){c&&t.current.leafletElement.openPopup()}),[c]),o.a.createElement(i.a,{icon:k,ref:t,position:a,onClick:function(){return s(r)}},o.a.createElement(v,l))},O=function(e){console.log(e);var t=Object(n.useRef)(null),a=Object(n.useState)(!0),l=Object(r.a)(a,2),s=l[0],m=(l[1],!c.selData.length);return console.log(m),Object(n.useEffect)((function(){console.log(s),console.log(!c.selData),m&&t.current.leafletElement.openPopup()}),[m]),o.a.createElement(i.a,Object.assign({ref:t},e,{openPopup:s}),o.a.createElement(u.a,null," You're Here ",o.a.createElement("br",null)," Reira "))};return o.a.createElement(m.a,{center:E,zoom:13,viewport:{center:c.selData.length?E:t,zoom:15}},o.a.createElement(d.a,{attribution:'\xa9 <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),o.a.createElement(O,{icon:y,position:t}),o.a.createElement(A,{selectedIndex:a.selected}))},N=function(){return o.a.createElement("div",{id:"loading"},o.a.createElement("div",{className:"loader"}))},S=a(20),C=a(37),z=a(25),x=function(e){var t=e.item,a=e.orderid,n=e.onItemClick,c=e.newsss,l=t.properties;return o.a.createElement("div",{className:"store_detail",onClick:function(){return n(a)}},o.a.createElement("h2",{className:"store_title","data-child":l.mask_child,"data-adult":l.mask_adult},l.name,o.a.createElement("span",null,o.a.createElement("i",{className:"fas fa-map-marker-alt"}),c>=1?c.toFixed(1)+"km":(1e3*c>>0)+"m")),o.a.createElement("p",{className:"addtolist"},o.a.createElement("i",{className:"far fa-check-square"})),o.a.createElement("p",null,o.a.createElement("i",{className:"fas fa-briefcase"}),l.address),o.a.createElement("p",null,o.a.createElement("i",{className:"fas fa-phone fa-flip-horizontal"}),o.a.createElement("a",{href:"tel:{properties.phone}"},l.phone)),l.note.length<=1?" ":o.a.createElement("p",null,o.a.createElement("i",{className:"fas fa-tag"}),l.note),o.a.createElement("div",{className:"mask_size"},o.a.createElement("span",{"data-size":"adult"},"\u6210\u4eba",l.mask_adult),o.a.createElement("span",{"data-size":"child"},"\u5152\u7ae5",l.mask_child)),o.a.createElement("span",null,"\u6700\u5f8c\u66f4\u65b0:",l.updated))},I=function(e){var t=e.county,a=e.town,c=e.size,l=Object(n.useContext)(f),r=l.data,s=l.position,i=l.selindex,u=l.filterdata;console.log(t),console.log(a),console.log(u),console.log(r),console.log(s);var m=Object(n.useMemo)((function(){return t&&a?r.filter((function(e){var n=e.properties;return n.county.replace(/\u81fa/g,"\u53f0")===t&&n.town.replace(/\u81fa/g,"\u53f0")===a&&function(e,t){return"child"==e?t.mask_child>0:"adult"==e?t.mask_adult>0:t.mask_adult>=0||t.mask_child>=0}(c,n)})):r.filter((function(e){return d([s[0],s[1]],[e.geometry.coordinates[1],e.geometry.coordinates[0]])<1}))}),[t,a]);function d(e,t){var a=e[0],n=e[1],o=t[0],c=t[1];return 12756.274*Math.asin(Math.sqrt(Math.pow(Math.sin(Math.PI*(a-o)/360),2)+Math.cos(Math.PI*a/180)*Math.cos(Math.PI*o/180)*Math.pow(Math.sin(Math.PI*(n-c)/360),2)))}function g(e){i.setSelected(e)}return Object(n.useEffect)((function(){console.log(m),console.log(!m.length);var e=r.filter((function(e){return d([s[0],s[1]],[e.geometry.coordinates[1],e.geometry.coordinates[0]])<1}));console.log(e),m.length?u.setSeldata(m):u.setSeldata(e)}),[m]),o.a.createElement("div",{className:"datalist",id:"storelist"},m.sort((function(e,t){var a=e.geometry.coordinates,n=t.geometry.coordinates;return d([s[0],s[1]],[a[1],a[0]])-d([s[0],s[1]],[n[1],n[0]])})).map((function(e,t){return o.a.createElement(x,{key:t,item:e,orderid:t,onItemClick:g,newsss:d([s[0],s[1]],[e.geometry.coordinates[1],e.geometry.coordinates[0]])})})))},L=function(e){var t=e.county,a=e.open,c=e.onClick,l=(e.setOpen,e.open_list),s=document.querySelector("#mask_sel"),i=Object(n.useState)(""),u=Object(r.a)(i,2),m=u[0],d=u[1];console.log(s);var f=Object(n.useState)(l),g=Object(r.a)(f,2),p=g[0],v=g[1];console.log(l),console.log(a),Object(n.useEffect)((function(){v(l),console.log(p)}),[l]);var E=Object(n.useState)(""),h=Object(r.a)(E,2),A=h[0],b=h[1],O=Object(n.useState)(""),j=Object(r.a)(O,2),k=j[0],y=j[1];var w=function(e){var t=new Set;return e.filter((function(e){var a=e.county;return!t.has(a)&&t.add(a)})).map((function(e){return e.county.replace(/\u81fa/g,"\u53f0")})).sort((function(e,t){return e.localeCompare(t,"zh-Hant-TW-u-co-stroke")})).map((function(e){return{value:e,label:e}}))}(t),N=t?function(e,t){var a=new Set;return console.log(t),e.filter((function(e){return e.county.replace(/\u81fa/g,"\u53f0")===t})).filter((function(e){var t=e.town;return!a.has(t)&&a.add(t)})).map((function(e){return e.town})).sort((function(e,t){return e.localeCompare(t,"zh-Hant-TW-u-co-stroke")})).map((function(e){return{value:e,label:e}}))}(t,A):[];Object(C.a)(document.querySelectorAll(".open_arrow")).forEach((function(e){return e.addEventListener("click",(function(e){e.currentTarget.classList.toggle("active"),e.currentTarget.parentNode.classList.toggle("ctrl_size")}))}));var x="list"==l?o.a.createElement("div",{className:"overlay ".concat(a?"active":""),"data-id":"list",id:"list",value:a},o.a.createElement("button",{className:"open_arrow"},o.a.createElement("i",{className:"fas fa-angle-up"})),o.a.createElement("div",{className:"close_overlay",onClick:function(){return c("close")}},o.a.createElement("i",{className:"fas fa-times"})),o.a.createElement("div",{className:"select-box"},o.a.createElement("span",null,"\u7e23\u5e02"),o.a.createElement(z.a,{className:"select",options:w,onChange:function(e){console.log(e.value),b(e.value),y("")}}),o.a.createElement("span",null,"\u5730\u5340"),o.a.createElement(z.a,{className:"select",options:N,onChange:function(e){console.log(e.value),y(e.value)}}),o.a.createElement("div",{className:"my-selector-c"},o.a.createElement("div",{id:"mask_sel",onClick:function(e){if("BUTTON"==e.target.nodeName){var t=document.querySelectorAll(".store_detail"),a=e.target.dataset.item;t.forEach((function(e){return t=e,void("all"==(n=a)||t.firstElementChild.dataset[n]>0?t.classList.remove("d-none"):t.classList.add("d-none"));var t,n})),e.target.classList.add("active"),d(e.target.dataset.item);var n,o=Object(S.a)(e.target.parentNode.children);try{for(o.s();!(n=o.n()).done;){var c=n.value;c!==e.target&&c.classList.remove("active")}}catch(l){o.e(l)}finally{o.f()}}}},o.a.createElement("button",{className:"mask_all active","data-item":"all"},"ALL"),o.a.createElement("button",{className:"mask_all","data-item":"adult"},"Adult"),o.a.createElement("button",{className:"mask_all","data-item":"child"},"Child")))),o.a.createElement(I,{county:A,town:k,size:m})):o.a.createElement("div",{className:"overlay ".concat(a?"active":""),"data-id":l,id:l,value:a},o.a.createElement("button",{className:"open_arrow"},o.a.createElement("i",{className:"fas fa-angle-up"})),o.a.createElement("div",{className:"close_overlay",onClick:function(){return c("close")}},o.a.createElement("i",{className:"fas fa-times"})),l);return o.a.createElement("div",null,x)},_=function(e){var t,a=Object(n.useContext)(f),c=a.data,l=(a.position,e.itemlist,e.openid,e.open),r=e.onClick;e.setOpen;return console.log(e.itemlist),o.a.createElement(L,{open_list:e.itemlist,county:(t=c,t.map((function(e){var t=e.properties;return{county:t.county,town:t.town}}))),open:l,onClick:r})},T=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),s=Object(r.a)(l,2),i=s[0],u=s[1],m=Object(n.useState)(),d=Object(r.a)(m,2);d[0],d[1];function f(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}var g=Object(n.useState)(0),p=Object(r.a)(g,2),v=p[0];p[1],f(v);function E(e){if(console.log(e),"close"!=e){console.log("--overlayid--"+i+"--etarget--"+e.target.dataset.id);var t=e.target.classList.value;if(i&&i!=e.target.dataset.id){console.log("\u5207\u63dbother");var n,o=Object(S.a)(document.querySelectorAll(".list_menu"));try{for(o.s();!(n=o.n()).done;){n.value.classList.remove("active")}}catch(d){o.e(d)}finally{o.f()}e.target.classList.add("active"),c(!0)}else{console.log("\u81ea\u5df1"+t+"---"+e.target.classList.value);var l=e.target.dataset.id;console.log(l);var r=document.querySelectorAll("li[data-id=".concat(l,"]"))[0].classList;r.value.indexOf("active")>-1?r.remove("active"):r.add("active"),c(!a)}u(e.target.dataset.id)}else{console.log("close");var s,m=Object(S.a)(document.querySelectorAll(".list_menu"));try{for(m.s();!(s=m.n()).done;){s.value.classList.remove("active")}}catch(d){m.e(d)}finally{m.f()}c(!a)}}var h=[{id:"personal",icon:"fa-user",desc:"\u500b\u4eba\u8a18\u9304R"},{id:"mystore",icon:"fa-folder-open",desc:"\u6211\u7684\u6700\u611b"},{id:"list",icon:"fa-calendar-plus",desc:"search"},{id:"relocate",icon:"fa-compass",desc:"\u91cd\u65b0\u5b9a\u4f4d"}].map((function(e,t){return o.a.createElement("li",{key:t,className:"list_menu",onClick:E,"data-id":e.id,"data-index":t},o.a.createElement("i",{className:"fa ".concat(e.icon)}),o.a.createElement("span",{className:"dialog"},e.desc))}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(_,{itemlist:i,open:a,onClick:E}),o.a.createElement("ul",{className:"mobile_menu",id:"menu_bar","data-id":"menu_bar"},h))},R=(a(51),function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),a={selected:t[0],setSelected:t[1]},c=Object(n.useState)([]),l=Object(r.a)(c,2),s=l[0],i=l[1],u=Object(n.useState)([]),m=Object(r.a)(u,2),d={selData:m[0],setSeldata:m[1]},g=Object(n.useState)(!1),p=Object(r.a)(g,2),v=(p[0],p[1],Object(n.useState)(!0)),E=Object(r.a)(v,2),h=E[0],A=E[1],b=Object(n.useState)([0,0]),O=Object(r.a)(b,2),j=O[0],k=O[1];return Object(n.useEffect)((function(){Promise.all([new Promise((function(e){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e([t.coords.latitude,t.coords.longitude])})):alert("Geolocation is not supported by your browser")})).then((function(e){return console.log(e),k(e),e})),(A(!0),void fetch("https://raw.githubusercontent.com/kiang/pharmacies/master/json/points.json").then((function(e){return e.json()})).then((function(e){return console.log(e.features),i(e.features),A(!1),e.features})))]).then((function(e){j.length||A(!0),console.log(e[0]),console.log(e[1]),console.log(j)})).catch((function(e){console.log(e.message)}))}),[]),o.a.createElement(o.a.Fragment,null,h?o.a.createElement(N,null):null,o.a.createElement("div",{className:"main"},o.a.createElement(f.Provider,{value:{data:s,position:j,selindex:a,filterdata:d}},o.a.createElement(w,null),o.a.createElement(T,null))))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.501bd6fd.chunk.js.map